<!DOCTYPE html>
<!-- saved from url=(0063)http://www.mif.vu.lt/~rimask/canvas/Linkages/parallelogram.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }

    </style>
  </head>
  <body>
  <form action="/action_page.php" id = "form" onsubmit="start()">
		BF:<br>
		<input type="number" min="0"  name="BF"  id="BF" ><br>
			EF:<br>
		<input type="number" min="0" name="EF" id="EF" ><br><br>
		<input type="submit" value="Submit">
	</form>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<button id='pause'>Pause</button>
<button id='continue'>Continue</button>
<br>

	<!--<label class="switch">
	  <input type="checkbox" checked>
	  <span class="slider round"></span>
	</label><br><br>-->
    <canvas id="myCanvas" width="800" height="800"></canvas>
    <script>
	
      window.requestAnimFrame = (function(callback) {
        return window.requestAnimationFrame || 
		window.webkitRequestAnimationFrame || 
		window.mozRequestAnimationFrame || 
		window.oRequestAnimationFrame || 
		window.msRequestAnimationFrame ||
        function(callback) {
          window.setTimeout(callback, 1000 / 60);
        };
      })();
	  
	  
	  
	  // animation will pause when paused==true
		var paused=false;

		// pause the animation on #pause click
		$('#pause').on('click',function(){
		  paused=true;
		});

		// continue the animation on #continue click
		$('#continue').on('click',function(){
		  paused=false;
		  window.requestAnimFrame(animate);
		});
		
		
      function draw(myLink, ctx) {
        ctx.beginPath();
        ctx.rect(-myLink.off, -myLink.off, myLink.width+2*myLink.off, 2*myLink.off);
        ctx.fillStyle = myLink.color;
        ctx.fill();
        ctx.lineWidth = myLink.borderWidth;
        ctx.strokeStyle = 'black';
        ctx.stroke();
        ctx.beginPath();        
        ctx.arc(0,0,myLink.borderWidth/2+15,0,Math.PI*2,true);
        ctx.fillStyle = '#FFFF00';
        ctx.fill();
		ctx.strokeStyle = 'black';
        ctx.stroke();
        ctx.beginPath();        
        ctx.arc(myLink.width,0,myLink.borderWidth/2+15,0,Math.PI*2,true);
        ctx.fillStyle = '#FFFF00';
        ctx.fill();
		ctx.strokeStyle = 'black';
        ctx.stroke();
      }
	  
	 
	  
      function animate(aLink, bLink, cLink, dLink, eLink,beLink, ceLink, canvas, ctx, startTime) {
	  if(paused){return;}
        // update
        var time = (new Date()).getTime() - startTime;

        var t = time / 80;

        ctx.clearRect(0, 0, canvas.width, canvas.height);
        // store initial coordinates
        ctx.save(); // [M0]
        ctx.save(); // [M0,M0]
        ctx.translate(canvas.width/2+100,canvas.height/2);
		var th1 = Math.PI/180*t
		ctx.rotate(th1); 
		
        //draw(aLink, ctx);
        ctx.restore();  // M0 [M0]		
        ctx.translate(canvas.width/2-100,canvas.height/2);
		ctx.save();  // [M1,M0]
		ctx.save();
		alpha = -th1;
		ctx.rotate(alpha);
		draw(aLink, ctx);
		
        var BD = Math.sqrt( aLink.width*aLink.width + bLink.width*bLink.width - 2*aLink.width*bLink.width*Math.cos(alpha) );
		
        var theta = Math.acos((BD*BD + aLink.width*aLink.width - bLink.width*bLink.width)/(2*BD*aLink.width));
				
		var beta = Math.acos(( bLink.width*bLink.width + BD*BD - aLink.width*aLink.width)/(2*BD*bLink.width)); 
		var gamma = Math.acos(( bLink.width*bLink.width + aLink.width*aLink.width - BD*BD)/(2*aLink.width*bLink.width));
		
		var charlie = Math.acos(( aLink.width*aLink.width + bLink.width*bLink.width - BD*BD)/(2*aLink.width*bLink.width)); // tas pats kas gama
		
		var BF = document.getElementById("BF").value; //paimti skaiciu 
		console.log("BF" + BF);
		var EF = document.getElementById("EF").value; //paimti skaiciu 
		dLink.width = 150;	
		eLink.width = 80;
		
		var BE = Math.sqrt(eLink.width * eLink.width + dLink.width * dLink.width);
		var psi = Math.acos((BE * BE + dLink.width * dLink.width - eLink.width *  eLink.width) / (2 * BE * dLink.width)); // kampas EBF
		var FC = bLink.width - dLink.width;
		ceLink.width = Math.sqrt(eLink.width * eLink.width + FC * FC);
		var fce = Math.acos((FC * FC + ceLink.width * ceLink.width - eLink.width *  eLink.width) / (2 * FC * ceLink.width)); // kampas FCE
		//console.log("FEC" + fce);
		
        ctx.translate(aLink.width,0);
		if (((th1)%(Math.PI*2)) > Math.PI){
		// uz apacios veikima atsakingas
		       
		        ctx.rotate(Math.PI+theta);
				cLink.width = BD; // galim priskirti kadangi, niekam nera priskirtas
				//draw(cLink, ctx); // zalia BD piesia
				ctx.rotate(-beta);	
				
		 		draw(bLink, ctx);  // BC
				ctx.save();
				draw(dLink,ctx);       // BF (turetu buti reguliuojamas)
				
				// BE piesia
				ctx.save();
				ctx.rotate(-psi);
				beLink.width = BE;
				draw(beLink,ctx);
				ctx.restore();
				
				ctx.translate(dLink.width,0);
				ctx.rotate(-Math.PI/2);
				draw(eLink,ctx);
				
				ctx.rotate(Math.PI/2);
				ctx.translate(bLink.width - dLink.width,0);
				
				// CE piesia
				ctx.rotate(Math.PI + fce);
                draw(ceLink, ctx);
				
				ctx.restore();
				ctx.translate(bLink.width,0);
				//console.log("Charlie" + charlie):
				ctx.rotate(Math.PI-charlie);
				draw(aLink, ctx);  // CD
				
		}else{
			ctx.rotate(/*-Math.PI+theta + */gamma); // uzkomentinau 127 pridejau gamma
			draw(bLink, ctx); // BC
			draw(dLink,ctx);       // BF (turetu buti reguliuojamas)
			// BE piesia
			ctx.save();
			ctx.rotate(-psi);
			beLink.width = BE;
			draw(beLink,ctx);
			ctx.restore();
			ctx.save();
			ctx.translate(dLink.width,0);
			ctx.rotate(-Math.PI/2);
			draw(eLink,ctx);   // EF
			ctx.restore();
			// CE piesia
			ctx.translate(bLink.width,0);
			ctx.rotate(Math.PI + fce);
            draw(ceLink, ctx);
		}

		ctx.restore();  // M0 [M0]		
        ctx.translate(bLink.width,0);
		alpha = -Math.PI/180*t;
		
		///pasukimai skirti nupiesti
	   if (((Math.PI/180*t)%(Math.PI*2))>Math.PI){
		 
		}
		else{ // skirta nupiesti CD
		ctx.rotate(alpha);
		draw(aLink, ctx);  
		}
	
        ctx.restore(); // M1 [M0] 
        draw(bLink, ctx); // AD
        ctx.restore(); // M0 [] 
		
		
		/*ctx.moveTo(300+bLink.width + dLink.width - eLink.width,400);
		ctx.lineTo(300+bLink.width + dLink.width - eLink.width,200);
		ctx.stroke();
		*/
		
		
		
        requestAnimFrame(function() {
          animate(aLink, bLink, cLink, dLink, eLink, beLink, ceLink, canvas, ctx, startTime);
        });
		
      }
	  
      var canvas = document.getElementById('myCanvas');
      var ctx = canvas.getContext('2d');

      var aLink = {
        color: '#B40431',
        width: 150,
        off: 10,
        borderWidth: 4
      };

      var bLink = {
        color: '#B40431',
        width: 250,
        off: 10,
        borderWidth: 4
      };
	  
	  var cLink = {
        color: '#B40431',
        width: 400,
        off: 10,
        borderWidth: 4
      };

      var dLink = { // BF
		color: '#B40431',
		width: 100,
		off: 10,
       borderWidth: 4
      };
	  
	  var eLink = { // EF
		color: '#B40431',
		width: 200,
		off: 10,
       borderWidth: 4
      };
	  
	 var beLink = { // BE
		color: '#B40431',
		width: 100,
		off: 10,
       borderWidth: 4
      };
	 
	var ceLink = { // CE
		color: '#B40431',
		width: 100,
	    off: 10,
       borderWidth: 4
      };
	  
      //draw(myLink, ctx);

      // wait one second before starting animation
//      setTimeout(function() {
        var startTime = (new Date()).getTime();
        animate(aLink, bLink, cLink, dLink, eLink, beLink, ceLink, canvas, ctx, startTime);
//      }, 1000);

				
    </script>
  
</body>
</html>